{"ast":null,"code":"import _regenerator from \"E:/phpDemo/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"E:/phpDemo/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ref, onMounted } from 'vue';\nimport axios from 'axios';\nexport default {\n  name: 'Contact',\n  setup: function setup() {\n    var contact = ref({\n      email: '',\n      phone: '',\n      address: ''\n    });\n    var form = ref({\n      name: '',\n      email: '',\n      subject: '',\n      message: ''\n    });\n    var isSubmitting = ref(false);\n    var submitStatus = ref(null);\n    var fetchContactInfo = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var response, _t;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.p = 0;\n              _context.n = 1;\n              return axios.get('/api/settings.php?section=contact');\n            case 1:\n              response = _context.v;\n              if (response.data && response.data.contact) {\n                contact.value = response.data.contact;\n              }\n              _context.n = 3;\n              break;\n            case 2:\n              _context.p = 2;\n              _t = _context.v;\n              console.error('Error fetching contact info:', _t);\n            case 3:\n              return _context.a(2);\n          }\n        }, _callee, null, [[0, 2]]);\n      }));\n      return function fetchContactInfo() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n    var handleSubmit = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2() {\n        var response, _error$response, _t2;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              isSubmitting.value = true;\n              submitStatus.value = null;\n              _context2.p = 1;\n              _context2.n = 2;\n              return axios.post('/api/contact.php', form.value);\n            case 2:\n              response = _context2.v;\n              submitStatus.value = {\n                success: true,\n                message: response.data.message\n              };\n              // 清空表单\n              form.value = {\n                name: '',\n                email: '',\n                subject: '',\n                message: ''\n              };\n              _context2.n = 4;\n              break;\n            case 3:\n              _context2.p = 3;\n              _t2 = _context2.v;\n              submitStatus.value = {\n                success: false,\n                message: ((_error$response = _t2.response) === null || _error$response === void 0 || (_error$response = _error$response.data) === null || _error$response === void 0 ? void 0 : _error$response.error) || 'An error occurred. Please try again.'\n              };\n            case 4:\n              _context2.p = 4;\n              isSubmitting.value = false;\n              return _context2.f(4);\n            case 5:\n              return _context2.a(2);\n          }\n        }, _callee2, null, [[1, 3, 4, 5]]);\n      }));\n      return function handleSubmit() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n    onMounted(function () {\n      fetchContactInfo();\n    });\n    return {\n      contact: contact,\n      form: form,\n      isSubmitting: isSubmitting,\n      submitStatus: submitStatus,\n      handleSubmit: handleSubmit\n    };\n  }\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}